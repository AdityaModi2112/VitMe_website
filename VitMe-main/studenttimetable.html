<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <style>
        table {
            width: 85%;
            border-collapse: collapse;
            height: 50vh;
            display: none; /* Hide the timetable initially */
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
    </style>
    <link rel="stylesheet" href="page41.css">
</head>
<body>
    <div class="main">
        <div class="nav">
            <div><a href="employeeblockSelectionPage3.html">Go back to Academic block selection</a></div>
            <div><a href="page2.html">Go back to the main page</a></div>  
        </div> 
        <div class="a">
            <div id="days">
                <button class="tab-links parallogram1" onclick="changeDay('Monday')">Monday</button>
                <button class="tab-links parallogram2" onclick="changeDay('Tuesday')">Tuesday</button>
                <button class="tab-links parallogram3" onclick="changeDay('Wednesday')">Wednesday</button>
                <button class="tab-links parallogram4" onclick="changeDay('Thursday')">Thursday</button>
                <button class="tab-links parallogram5" onclick="changeDay('Friday')">Friday</button>
            </div>
        
            <table id="timetable">
                <thead>
                    <tr>
                        <th>Floor No.</th>
                        <th>10:00am-10:50am</th>
                        <th>11:00am-11:50am</th>
                        <th>12:00pm-12:50pm</th>
                        <th>2:00pm-2:50pm</th>
                        <th>3:00pm-3:50pm</th>
                        <th>4:00pm-4:50pm</th>
                        <th>5:00pm-5:50pm</th>
                    </tr>
                </thead>
                <tbody id="timetableBody">
                    <!-- Table rows will be dynamically added here -->
                </tbody>
            </table>
        </div>
    </div>
    <script>
        // Function to create the timetable table dynamically
        function createTimetable(day, data) {
            const tableBody = document.getElementById("timetableBody");
            tableBody.innerHTML = '';

            // Loop through each floor
            for (let i = 0; i <= 6; i++) {
                const row = document.createElement("tr");

                // Add floor number
                const floorCell = document.createElement("td");
                floorCell.textContent = i;
                row.appendChild(floorCell);

                // Loop through each time slot
                for (let j = 0; j <= 6; j++) {
                    const cell = document.createElement("td");
                    const classInfo = data[day][j.toString()];
                    let roomText = "";
                    if (classInfo && classInfo.length > i) {
                        roomText = classInfo[i].room;
                    }
                    cell.textContent = roomText;
                    row.appendChild(cell);
                }

                tableBody.appendChild(row);
            }
        }

        // Change the day when a button is clicked
        function changeDay(day) {
            const timetableData = JSON.parse(localStorage.getItem("timetableData"));
            createTimetable(day, timetableData);
        }

        // Initialize with Monday timetable
        const timetableData = localStorage.getItem("timetableData");
        if (timetableData) {
            createTimetable("Monday", JSON.parse(timetableData));
        }
        
        // Toggle visibility of timetable when any tab link is clicked
        $(document).ready(function(){
            $(".tab-links").click(function(){
                $("#timetable").slideToggle("slow");
            })
        })
    </script>
</body>
</html>
